# test: 测试数据文件夹

目前为止使用过的所有测试数据都放在这里，并按顺序编号。

## 第一阶段数据点

* 1~11: 助教提供，第一阶段样例（4 组）+第一阶段测试数据（10 组），其中有三组重复
* 12~14: 第一阶段额外数据（1.in ~ 3.in）
* 15: 第一阶段大样例性能测试（d.in）
* 16: 第一阶段稍小的大样例性能测试（w.in）

注意：12~16 组数据由 zzq 提供，它们的 `.out` 文件是运行本组第一阶段代码生成的，可能存在隐藏的 bug；这些数据原本存在主键数值重复的情况，已经去除。

## 第二阶段数据点

* 17: `COUNT` 函数
* 18: `GROUP BY` 和 `ORDER BY` 子句测试
* 19: `LOAD DATA` 加载文件测试

## 附加测试

* 20: 针对 D 组第一阶段代码出现的 magic number 的 `NULL` 测试
* 21: `ORDER BY` 测试，不包含 `COUNT` 及 `GROUP BY`

## 特殊测试点（不进行自动化测试）

* 51: `SELECT INTO` 保存测试（第二阶段样例）

## 测试脚本

`test.sh` 可用来对程序进行批量测试。使用方法：

1. make 程序得到 main 可执行文件
2. 将 main 拷贝到 test 目录下
3. 执行 `test.sh`
4. 执行完毕后目录下会产生 `report.txt` 报告文件，检查每个测试点的情况

说明：

1. 添加新的测试点后需要在 `for` 语句中修改测试点总数；
2. 执行 `test.sh` 如果提示没权限那么请先执行 `chmod +x test.sh` 赋予可执行权限；
3. 默认时间限制为 10 秒，可在 `timeout` 语句中修改；
4. 测试通过的数据点的输出会被删除，不通过的则会保留；
5. `report.txt` 文件在每次执行测试脚本时都会被覆写；
6. 51 号测试点涉及文件写入操作，为避免产生不必要的麻烦脚本中没有进行测试，需手动测试。`output_answer` 为该测试点保存的数据的标准答案。其他测试点可正常自动化测试；
7. `diff` 工具（源代码为 `diff.cpp`）是自动比较器，会过滤所有空白字符（空格、回车、制表符等），且支持实数比较（误差 1e-4 以内）。
